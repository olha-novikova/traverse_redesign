jQuery(function(a){function b(){var b=hello("xing").getAuthResponse();!f&&e(b)?c():hello("xing").login({force:f}).then(function(){f=!1,c()},function(b){a("input.apply-with-xing").removeAttr("disabled"),f=!0,console.log(b)})}function c(){return hello("xing").api("me").then(function(a){d(a.users)},function(a){f=!0,b()})}function d(b){var b=b[0],c=a(".apply-with-xing-profile");c.find(".profile-current-positions ul").empty().parent().show(),c.find(".profile-past-positions ul").empty().parent().show(),c.find(".profile-educations ul").empty().parent().show(),a("textarea#apply-with-xing-cover-letter").val(a("textarea#apply-with-xing-cover-letter").data("o_text")+b.display_name),a("#apply-with-xing-profile-data").val(JSON.stringify(b,null,"")),c.find(".profile-name").html(b.display_name),c.find(".profile-headline").html(b.haves),c.find("dd.profile-email").html(b.active_email);var d="",e=!1;if(b.business_address?e=b.business_address:b.private_address&&(e=b.private_address),e&&(e.city&&(d=e.city+", "),d+=e.country),c.find(".profile-location").html(d),b.photo_urls?(c.find("img").attr("src",b.photo_urls.size_96x96),c.find("img").attr("alt",b.display_name)):c.find("img").hide(),b.professional_experience){if(b.professional_experience.primary_company){var f=b.professional_experience.primary_company,g="<li><strong>"+f.title+"</strong> - "+f.name;f.description&&(g=g+"<br/>"+f.description),g+="</li>",c.find("dd.profile-current-positions ul").append(g)}else c.find(".profile-current-positions").hide();b.professional_experience.non_primary_companies?a(b.professional_experience.non_primary_companies).each(function(a){var d=b.professional_experience.non_primary_companies[a],e="<li><strong>"+d.title+"</strong> - "+d.name;d.description&&(e=e+"<br/>"+d.description),e+="</li>",c.find("dd.profile-past-positions ul").append(e)}):c.find(".profile-past-positions").hide()}else c.find(".profile-current-positions").hide(),c.find(".profile-past-positions").hide();b.educational_background&&b.educational_background.schools?a(b.educational_background.schools).each(function(a){var d=b.educational_background.schools[a],e="<li><strong>"+d.name+"</strong>";d.end_date&&(e=e+" ("+d.end_date+")"),d.subject&&(e=e+"<br/>"+d.subject),d.degree&&(e=e+" - "+d.degree),e+="</li>",c.find("dd.profile-educations ul").append(e)}):c.find(".profile-educations").hide(),a(".apply-with-xing-details").slideDown().triggerHandler("wp-job-manager-application-details-show"),a("input.apply-with-xing").removeAttr("disabled")}var e=function(a){var b=(new Date).getTime()/1e3;return a&&a.access_token&&a.expires>b},f=!1;hello.init({xing:apply_with_xing.consumer_key},{oauth_proxy:apply_with_xing.oauth_proxy,redirect_uri:apply_with_xing.redirect_uri}),a("textarea#apply-with-xing-cover-letter").data("o_text",a("textarea#apply-with-xing-cover-letter").val()),a(".application_button").click(function(){a(".wp-job-manager-application-details").slideUp()}),a("input.apply-with-xing").click(function(){return a(".application_details, .wp-job-manager-application-details").slideUp(),a("input.apply-with-xing").attr("disabled","disabled"),a(".apply-with-xing-details").is(":visible")?(a(".apply-with-xing-details").slideUp(),a("input.apply-with-xing").removeAttr("disabled")):b(),!1})});